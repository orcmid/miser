<!-- m230900c.md 0.0.1              UTF-8                         2026-02-13
     ----1----|----2----|----3----|----4----|----5----|----6----|----7----|--*
     source <https://github.com/orcmid/miser/blob/master/docs/omiser/2023/09/m230900c.md>
     publication <https://orcmid.github.io/miser/omiser/2023/09/m230900c.html>
     -->
<table border="0" width="100%">
  <tr>
    <td width="25%" align="left" height="6">
       <a href="../../" title="The Miser Project on GitHub">
       <img src="../../../images/misertheory-logo.png" /></a>
    </td>
       <td width="48%" height="6"><p align="center"><font color="#990033"><strong>
	<i><a href="../../m000001.htm#m230900"><font color="#990033">oMiser Technical Note m230900c
    </font></a></i><br />
    <i><big><big>Ob Comparison</big></big></i></strong></font></p>
    </td>
    <td width="27%" height="6" valign="middle" align="right">
      <b><tt>
      <a href="../../../../" target="_top">orcmid.github.io</a>&gt;
      </tt></b>
      <br />
      <a href="https://clustrmaps.com/site/1bw9w" title="Visit tracker">
            <img src="//www.clustrmaps.com/map_v2.png?d=3-2eQV4fOuelVHp_YtztZ0hl9Uj4ei9zLKw_nRgCgyM&cl=ffffff" />
      </a><br />
      <b>
      <a href="../../../" target="_top">miser</a>&gt;
      <a href="../../" target="_top">oMiser</a>&gt;
      <br /><br /><br />
         <a href="m230900c.html" target="_top">m230900c</a>&gt;</b>
      <br />
      <small><small>
        0.0.1 2026-02-13T02:11Z<!-- MAINTAIN THIS MANUALLY -->
      </small></small>
      </td>
  </tr>
</table>

## What Does HashTag Have to Do With This

All Obs have a 32-bit HashTag.  If the Ob is also one that is listed in the
MOb directory system, the HashTag can be used to search for information about
it, such as any symbolic name in the case of a literal individual (lindy).

Beside this, the reason that **all** ob-cells have a HashTag is so that it is
easier to tell if two different ob-cells are for identical obs or not.  This
serves two purposes: First, if the ob-cells have different HashTags, they are
for different obs.  Secondly, if the HashTags are the same, then they *might*
be for identical obs.  And, if that identity of the obs is confirmed, there is
potential for removing a duplicate and saving some storage as well as avoiding
a repeated collision.

The speculation is that HashTags will expedite comparisons between obs
and the improvement is worthwhile.  The prospect of duplicate removal is not
so clear and experiments along with instrumentation will determine whether
that's a wild-goose chase or not.

## The Abstract Comparison of Obs

In \[[obtheory](https://orcmid.github.io/miser/ob/obtheory.txt): Ob6.
Structural Identity\], the distinction/identity of two obs are in accordance
with 4 conditions.

```SML
        u = ob.c(v,w) ∧ z = ob.c(x,y)
                   ⇒ (u = z ⇔ v = x ∧ w = y)                  (a)

        u = ob.e(v) ∧ z = ob.e(x)
                   ⇒ (u = z ⇔ v = x)                          (b)

        ob.is-pair(u) ∧ ob.is-singleton(z)
                   ⇒ u ≠ z                                     (c)

        ob.is-individual(u) ∧ ob.a(z) ≠ z
                   ⇒ u ≠ z                                     (d)
```

This is sufficient to establish all of the cases, where individuals are never
duplicated and are distinguished by their names (and sometimes construction
for synthetics introduced in oMiser extensions).

## The Algorithmic Comparison of Obs

The following Frugalese procedure constitutes an algorithm for two obs
supplied as operands.

```SML
def d(x, y) = if loc(x) = loc(y)
              then true
              else if is-individual(x) or is-individual(y) then false
                   else if is-enclosure(x) and is-enclosure(y)
                        then d(a(x), a(y))
                        else if is-pair(x) and is-pair(y)
                             then d(a(x), a(y)) and d(b(x), b(y))
                             else false;
```

where loc(*x*) is the storage location of the ob-cell for *x*.


## The Benefit of HashFlags for Expedited Comparison

A nice feature of HashFlags is that the Flag distinguishes the structure
of the ob represented by the ob-cell. So if the HashFlags are different,
the represented obs must be.  Also, if the HashFlags agree, the represented
obs are of the same structure.

This leads to

```SML
def d(x, y) = if loc(x) = loc(y)
              then true
              else if hashflag(x) ≠ hashflag(y)
                   then false
                   else if is-enclosure(x)
                        then d(a(x) a(y))
                        else d(a(x), a(y)) and d(b(x), b(y));
```

The usage of hash codes to quickly distinguish list structures was pointed out
by Paul McJones.  Hash collisions must be contended with, but the flags being
the same ensures the collisions are of similar structures, narrowing the
cases.

## The Quest for Eliminating Duplications

### Hints?




## Resources ?

\[[Knuth1993b](../../../../../bib/authors.htm#Knuth1993b)\] Knuth, Donald E.
*The Stanford GraphBase: A Platform for Combinatorial Computing*.
Addison-Wesley (Boston: 1963).  ISBN 978-0-321-60632-7 pbk.

\[[Knuth1998](../../../../../bib/authors.htm#Knuth1998)\]
Knuth, Donald E. Chapter 3, Random Numbers, in  *The Art of Computer
Programming, vol.2: Seminumerical Algorithms*, ed.3.  Addison-Wesley (Reading,
MA: 1998).  ISBN 0-201-89684-2

\[[Knuth1998b](../../../../../bib/authors.htm#Knuth1998b)\]
Knuth, Donald E. Section 6.4, Hashing, in *The Art of Computer Programing,
vol. 3: Sorting and Searching*, ed.2. Addison-Wesley (Reading, MA), 1998.
ISBN 0-201-89685-0.

----

I invite discussion about Miser Project topics in the
[Discussion section](https://github.com/orcmid/miser/discussions).
Improvements and removal of defects in this particular documentation can be
reported and addressed in the
[Issues section](https://github.com/orcmid/miser/issues).  There are also
relevant [projects](https://github.com/orcmid/miser/projects?type=classic)
from time to time.

<table border="0" cellspacing="3" width="100%">
  <tr>
    <td width="14%">
	<a href="index.htm" target="_top">
       <img border="0" src="../../../images/hardhat-thumb.gif" alt="Hard Hat Area"
            align="left" width="80" height="57">
       </a>
    </td>
    <td width="54%" valign="middle" align="center">
      You are navigating the <a href="../../../">Miser Project on Github</a></td>
    <td width="30%">
      <p align="right"><font size="-2">created 2026-02-12 by
         <a target="_top" href="../../../../orcmid">orcmid</a> </font></p>
    </td>
  </tr>
</table>
<!--

  0.0.1  2026-02-13T02:11Z Initial distinction comparisons
  0.0.0  2026-02-12T21:49Z Initial placeholder draft.

               *** end of oMiser/2023/09/m230900c.md ***                  -->
